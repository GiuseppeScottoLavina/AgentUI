import{b as m}from"./chunk-0sb2pzxm.js";import{n as c,o,r as f}from"./chunk-1mzjthjp.js";class u extends c{static baseClass="au-repeat";static observedAttributes=[];#t=[];#s=(s,r)=>r;#i=(s)=>f`<div>${JSON.stringify(s)}</div>`;#e=/*@__PURE__*/new Map;disconnectedCallback(){super.disconnectedCallback(),this.#e.clear()}set items(s){let r=this.#t;this.#t=s||[],m.schedule(()=>this.#r(r))}get items(){return this.#t}set keyFn(s){this.#s=s}set renderItem(s){this.#i=s}render(){this.style.display="contents"}#r(s){let r=/*@__PURE__*/new Set,p=document.createDocumentFragment();for(let e=0;e<this.#t.length;e++){let i=this.#s(this.#t[e],e);r.add(i)}for(let[e,i]of this.#e)if(!r.has(e))i.remove(),this.#e.delete(e);let h=null;for(let e=0;e<this.#t.length;e++){let i=this.#t[e],n=this.#s(i,e),t=this.#e.get(n);if(!t){let l=document.createElement("div");l.innerHTML=this.#i(i,e),t=l.firstElementChild||l,t.dataset.muKey=n,this.#e.set(n,t)}else{let l=this.#i(i,e);if(t.outerHTML!==l){let d=document.createElement("div");d.innerHTML=l;let a=d.firstElementChild||d;a.dataset.muKey=n,t.replaceWith(a),this.#e.set(n,a),t=a}}if(h){if(t.previousElementSibling!==h)h.after(t)}else if(this.firstElementChild!==t)this.prepend(t);h=t}}getElement(s){return this.#e.get(s)}refresh(){this.#e.clear(),this.innerHTML="",m.schedule(()=>this.#r([]))}}o("au-repeat",u);
