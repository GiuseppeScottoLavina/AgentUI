class G extends HTMLElement{static observedAttributes=[];static baseClass="";static cssFile=null;static _loadedCSS=new Set;static _bundleChecked=!1;static _bundleLoaded=!1;static useContainment=!0;static describe(){let J=this.baseClass||this.name.replace(/^Au/,"au-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(G._describeCatalog?.[J])return G._describeCatalog[J];return{name:J,props:this.observedAttributes||[],baseClass:this.baseClass||"",cssFile:this.cssFile||null,version:"0.1.116"}}static _describeCatalog=null;_rendered=!1;_abortController=null;_timers=new Set;_intervals=new Set;constructor(){super();this._initAgentLogger()}_initAgentLogger(){if(!window.__AGENTUI_ERRORS__)window.__AGENTUI_ERRORS__=[];if(!window.AgentUIAgent)window.AgentUIAgent={reset:()=>{window.__AGENTUI_ERRORS__=[],console.log("[AgentUIAgent] Errors cleared")},getErrors:()=>window.__AGENTUI_ERRORS__,hasError:(J,Q)=>{return window.__AGENTUI_ERRORS__.some((Z)=>Z.component===J.toLowerCase()&&Z.code===Q)}}}logError(J,Q){let Z={component:this.tagName.toLowerCase(),code:J,message:Q,element:this,timestamp:Date.now()};window.__AGENTUI_ERRORS__.push(Z),console.warn(`[AgentUI] ${J}: ${Q}`,this)}connectedCallback(){if(!this._abortController)this._abortController=new AbortController;if(this.constructor.baseClass)this.classList.add(this.constructor.baseClass);if(this.constructor.useContainment&&!this.style.contain)this.style.contain="layout style";if(this.#J(),!this._rendered)this.render(),this._rendered=!0;this._loadComponentCSS(),this._inferSemanticAttributes()}#J(){this.listen(this,"click",(J)=>{let Q=J.target.closest("[data-action]");if(!Q||!this.contains(Q))return;let Z=Q.dataset.action;if(this.handleAction)this.handleAction(Z,Q,J)})}_loadComponentCSS(){let J=this.constructor.cssFile;if(!J)return;if(!G._bundleChecked)G._bundleChecked=!0,G._bundleLoaded=!!document.querySelector('link[href*="agentui.css"], link[href*="agentui.min.css"]')||!!document.querySelector('link[href*="agentui-wc"]')||!!document.querySelector('link[href*="components.css"]')||!!document.querySelector("style[data-agentui]")||document.styleSheets&&Array.from(document.styleSheets).some((W)=>{try{return W.cssRules&&Array.from(W.cssRules).some((X)=>X.selectorText?.includes(".au-button")||X.selectorText?.includes(".au-chip"))}catch{return!1}});if(G._bundleLoaded)return;if(G._loadedCSS.has(J))return;G._loadedCSS.add(J);let Q=document.createElement("link");Q.id=`au-css-${J}`,Q.rel="stylesheet";let Z="/styles/",$=document.querySelector('link[href*="/styles/"]');if($){let W=$.href.match(/(.*\/(?:src\/|dist\/)?styles\/)/);if(W)Z=W[1]}else{let W=document.querySelector('link[href*="/dist/"]');if(W){let X=W.href.match(/(.*\/dist\/)/);if(X)Z=X[1]+"styles/"}else{let X=document.querySelector('script[src*="/src/"]');if(X){let q=X.src.match(/(.*\/src\/)/);if(q)Z=q[1]+"styles/"}}}Q.href=`${Z}components/${J}.css`,document.head.appendChild(Q)}_inferSemanticAttributes(){let J=this.tagName.toLowerCase();if(this.hasAttribute("data-au-action"))return;let Q="",Z="";switch(J){case"au-button":Q=this._inferButtonAction(),Z=this._inferButtonRole();break;case"au-input":case"au-textarea":Q="input",Z="text-field";break;case"au-checkbox":case"au-switch":Q="toggle",Z="control";break;case"au-dropdown":Q="select",Z="selector";break;case"au-modal":Q="dialog",Z="overlay";break;case"au-tabs":Q="navigate",Z="navigation";break;case"au-card":Z="container";break}if(Q)this.setAttribute("data-au-action",Q);if(Z)this.setAttribute("data-au-role",Z)}_inferButtonAction(){let J=this.textContent?.toLowerCase().trim()||"";if(/^(save|submit|confirm|send|create|add|apply|ok|yes)$/.test(J))return"submit";if(/^(cancel|close|dismiss|no|nevermind)$/.test(J))return"cancel";if(/^(delete|remove|clear|trash)$/.test(J))return"delete";if(/^(back|next|previous|forward|continue)$/.test(J))return"navigate";return"click"}_inferButtonRole(){let J=this.getAttribute("variant");if(J==="filled"||J==="elevated")return"primary-action";if(J==="tonal"||J==="outlined")return"secondary-action";if(J==="text")return"tertiary-action";if(J==="danger")return"destructive-action";return"action"}disconnectedCallback(){if(this._abortController)this._abortController.abort(),this._abortController=null;for(let J of this._timers)clearTimeout(J);this._timers.clear();for(let J of this._intervals)clearInterval(J);this._intervals.clear(),this.cleanup()}cleanup(){}attributeChangedCallback(J,Q,Z){if(Q!==Z&&this._rendered)this.update(J,Z,Q)}render(){}update(J,Q,Z){}setupEvents(){}attr(J,Q=""){return this.getAttribute(J)??Q}has(J){return this.hasAttribute(J)}emit(J,Q={}){this.dispatchEvent(new CustomEvent(J,{bubbles:!0,composed:!0,detail:Q}))}listen(J,Q,Z,$={}){if(!this._abortController)this._abortController=new AbortController;let W={...$,signal:this._abortController.signal};J.addEventListener(Q,Z,W)}setTimeout(J,Q){let Z;return Z=setTimeout(()=>{this._timers.delete(Z),J()},Q),this._timers.add(Z),Z}setInterval(J,Q){let Z=setInterval(J,Q);return this._intervals.add(Z),Z}setupActivation(J){this.updateTabindex(),this.listen(this,"keydown",(Q)=>{if((Q.key==="Enter"||Q.key===" ")&&!this.has("disabled"))Q.preventDefault(),J()})}updateTabindex(){this.setAttribute("tabindex",this.has("disabled")?"-1":"0")}setDisplay(J){this.style.display=J}get isDisabled(){return this.has("disabled")}}function U(J,Q,Z={}){if(customElements.get(J))return;let $=Z.priority||"user-blocking";if(typeof scheduler<"u"&&scheduler.postTask)scheduler.postTask(()=>{if(!customElements.get(J))customElements.define(J,Q)},{priority:$});else customElements.define(J,Q)}var j=typeof window<"u"?window:globalThis,g=["ui:toast","ui:modal","ui:theme","ui:tabs","ui:dropdown","ui:form","ui:grid","ui:stack","ui:virtual-list"],h={type:"ui-framework",version:"0.1.116",description:"AI-Optimized UI Framework - Web Components Edition"};class N{#J=new Map;#Q=new Map;#Z=new Set;#$=new Set;#W=100;#X=!1;#q=Date.now();peerId;capabilities;meta;constructor(J={}){this.peerId=J.peerId??"default",this.capabilities=J.capabilities??[],this.meta=J.meta??{},this.#X=J.debug??!1}on(J,Q){if(!this.#J.has(J))this.#J.set(J,new Set);let Z=Q;this.#J.get(J).add(Z);let $=this.#J.get(J).size;if($>this.#W)console.warn(`[AgentUI] Possible event leak: "${J}" has ${$} listeners (maxListeners: ${this.#W}). Use setMaxListeners() to increase.`);return{unsubscribe:()=>this.#J.get(J)?.delete(Z)}}off(J,Q){this.#J.get(J)?.delete(Q)}emitSync(J,Q){let Z={event:J,data:Q};for(let W of this.#$)Z=W(Z,{event:J})??Z;let $=this.#J.get(J);if($)for(let W of $){let X=Z;for(let q of this.#Z)X=q(X,{event:J})??X;W(X)}for(let[W,X]of this.#J)if(W.endsWith("*")&&J.startsWith(W.slice(0,-1))&&W!==J)for(let q of X)q(Z)}async emit(J,Q){return this.emitSync(J,Q),{delivered:!0,event:J}}signal(J,Q){this.emitSync(J,Q)}hasListeners(J){return(this.#J.get(J)?.size??0)>0}handle(J,Q){return this.#Q.set(J,Q),{unsubscribe:()=>this.#Q.delete(J)}}unhandle(J){this.#Q.delete(J)}async request(J,Q,Z){let $=this.#Q.get(Q);if(!$)throw Error(`No handler for '${Q}'`);return $(Z)}async broadcastRequest(J,Q){return this.request(this.peerId,J,Q)}addInboundHook(J){return this.#Z.add(J),()=>this.#Z.delete(J)}addOutboundHook(J){return this.#$.add(J),()=>this.#$.delete(J)}setMaxListeners(J){this.#W=J}get debug(){return this.#X}get peers(){return[]}get peerCount(){return 0}healthCheck(){return{status:"healthy",peerId:this.peerId,uptime:Date.now()-this.#q,listeners:this.#J.size,handlers:this.#Q.size}}destroy(){this.#J.clear(),this.#Q.clear(),this.#Z.clear(),this.#$.clear()}}if(!j.__AGENTUI_BUS__)j.__AGENTUI_BUS__=new N({peerId:"agentui",capabilities:g,meta:h});var K=j.__AGENTUI_BUS__,O="__AGENTUI_COMPONENT_REGISTRY__";if(!j[O])j[O]=new Map;var u=j[O],_={on(J,Q){let Z=K.on(J,($)=>{Q($.data??$)});return()=>Z.unsubscribe()},once(J,Q){let Z=this.on(J,($)=>{Z(),Q($)})},off(J,Q){K.off(J,Q)},emit(J,Q){return K.emitSync(J,Q)},async emitAsync(J,Q){return K.emit(J,Q)},signal(J,Q){K.signal(J,Q)},async request(J,Q,Z){return K.request(J,Q,Z)},async broadcastRequest(J,Q){return K.broadcastRequest(J,Q)},handle(J,Q){return K.handle(J,Q)},unhandle(J){K.unhandle(J)},destroy(){K.destroy()},setMaxListeners(J){K.setMaxListeners(J)},get peerId(){return K.peerId},get peers(){return K.peers},get peerCount(){return K.peerCount},hasListeners(J){return K.hasListeners(J)},get raw(){return K}},Y={TOAST_SHOW:"ui:toast:show",TOAST_DISMISS:"ui:toast:dismiss",MODAL_OPEN:"ui:modal:open",MODAL_CLOSE:"ui:modal:close",THEME_CHANGE:"ui:theme:change",TAB_CHANGE:"ui:tab:change",DROPDOWN_SELECT:"ui:dropdown:select",FORM_SUBMIT:"ui:form:submit",FORM_VALIDATE:"ui:form:validate"},d=(J,Q={})=>{_.emit(Y.TOAST_SHOW,{message:J,...Q})};var L=(J,Q)=>{u.set(J,{...Q,registeredAt:Date.now()})};var V={set(J){if(J==="auto"){let Q=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",Q?"dark":"light")}else document.documentElement.setAttribute("data-theme",J);localStorage.setItem("au-theme",J),_.emit(Y.THEME_CHANGE,{theme:J})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let J=this.get();this.set(J==="dark"?"light":"dark")},init(){let J=localStorage.getItem("au-theme");if(J)this.set(J);else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(Q)=>{if(localStorage.getItem("au-theme")==="auto")document.documentElement.setAttribute("data-theme",Q.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null}};if(typeof window<"u")V.init();function A(J={}){let Q={...J},Z=new Set;return{get(){return Q},set($){Q={...Q,...$},this.notify()},update($){let W=$(Q);this.set(W)},subscribe($){return Z.add($),$(Q),()=>Z.delete($)},notify(){for(let $ of Z)$(Q)},reset(){Q={...J},this.notify()}}}var m=A({});function T(J,Q,Z={}){let{color:$="currentColor",centered:W=!1}=Z,X=J.getBoundingClientRect(),q,M;if(W||!Q)q=X.width/2,M=X.height/2;else{let b=Q.touches?Q.touches[0].clientX:Q.clientX,v=Q.touches?Q.touches[0].clientY:Q.clientY;q=b-X.left,M=v-X.top}let F=Math.max(Math.hypot(q,M),Math.hypot(X.width-q,M),Math.hypot(q,X.height-M),Math.hypot(X.width-q,X.height-M))*2,D=document.createElement("span");D.className="au-ripple-wave",D.style.cssText=`
        position: absolute;
        width: ${F}px;
        height: ${F}px;
        left: ${q-F/2}px;
        top: ${M-F/2}px;
        background: ${$};
        border-radius: 50%;
        transform: scale(0);
        opacity: 0.10;
        pointer-events: none;
    `;let B=getComputedStyle(J);if(B.position==="static")J.style.position="relative";if(B.overflow!=="hidden")J.style.overflow="hidden";J.appendChild(D),D.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"forwards"});let z=()=>{D.animate([{opacity:"0.10"},{opacity:"0"}],{duration:150,easing:"ease-out",fill:"forwards"}).onfinish=()=>D.remove(),J.removeEventListener("pointerup",z),J.removeEventListener("pointerleave",z),J.removeEventListener("pointercancel",z)};return J.addEventListener("pointerup",z,{once:!0}),J.addEventListener("pointerleave",z,{once:!0}),J.addEventListener("pointercancel",z,{once:!0}),D}function C(J,Q={}){let Z=($)=>{if(J.hasAttribute("disabled"))return;T(J,$,Q)};return J.addEventListener("pointerdown",Z),()=>{J.removeEventListener("pointerdown",Z)}}var p=(J)=>class extends J{#J=null;initRipple(Q=this,Z={}){this.#J=C(Q,Z)}disconnectedCallback(){if(this.#J)this.#J(),this.#J=null;super.disconnectedCallback?.()}};var P="startViewTransition"in document;async function H(J){if(P)await document.startViewTransition(async()=>{await J()}).finished;else await J()}async function c(J,{name:Q="page"}={}){if(P){let Z=document.createElement("style");Z.textContent=`
            ::view-transition-old(${Q}),
            ::view-transition-new(${Q}) {
                animation-duration: 0.3s;
            }
        `,document.head.appendChild(Z),await H(J),Z.remove()}else await J()}async function r(J,Q){await H(()=>{window.history.pushState({},"",J),Q()})}var x="scheduler"in globalThis;async function w(J,Q="user-visible"){if(x)return globalThis.scheduler.postTask(J,{priority:Q});let Z=Q==="user-blocking"?0:Q==="user-visible"?0:1;return new Promise(($)=>{setTimeout(()=>$(J()),Z)})}async function S(){if(x&&"yield"in globalThis.scheduler)return globalThis.scheduler.yield();return new Promise((J)=>setTimeout(J,0))}async function i(J,Q,Z=50){for(let $=0;$<J.length;$++)if(Q(J[$],$),($+1)%Z===0)await S()}function o(J){return w(J,"background")}function l(J){return w(J,"user-blocking")}class E{#J=[];#Q=!1;schedule(J){if(this.#J.push(J),!this.#Q)this.#Q=!0,requestAnimationFrame(()=>this.#Z())}#Z(){let J=this.#J.slice();this.#J=[],this.#Q=!1;for(let Q of J)try{Q()}catch(Z){console.error("[RenderScheduler] Error:",Z)}}}var s=new E;function n(J,Q={}){let Z=Q.keyFn??JSON.stringify,$=Q.maxSize??1/0,W=new Map;return(...X)=>{let q=Z(X);if(W.has(q))return W.get(q);let M=J(...X);if(W.size>=$){let F=W.keys().next().value;W.delete(F)}return W.set(q,M),M}}function a(J,Q=100){let Z=null;return(...$)=>{if(Z)clearTimeout(Z);Z=setTimeout(()=>J(...$),Q)}}function t(J,Q=100){let Z=!1;return(...$)=>{if(!Z)J(...$),Z=!0,setTimeout(()=>Z=!1,Q)}}function e(J,Q={}){let Z=new IntersectionObserver(($)=>{for(let W of $)if(W.isIntersecting)J(W.target),Z.unobserve(W.target)},{rootMargin:"100px",threshold:0,...Q});return{observe:($)=>Z.observe($),disconnect:()=>Z.disconnect()}}class k{#J=[];#Q=[];#Z=!1;read(J){this.#J.push(J),this.#$()}write(J){this.#Q.push(J),this.#$()}#$(){if(!this.#Z)this.#Z=!0,requestAnimationFrame(()=>this.#W())}#W(){let J;while(J=this.#J.shift())try{J()}catch(Q){console.error(Q)}while(J=this.#Q.shift())try{J()}catch(Q){console.error(Q)}if(this.#Z=!1,this.#J.length||this.#Q.length)this.#$()}}var JJ=new k;async function QJ(J,Q,Z=100){for(let $=0;$<J.length;$+=Z){let W=J.slice($,$+Z);for(let X=0;X<W.length;X++)Q(W[X],$+X);await new Promise((X)=>setTimeout(X,0))}}class I extends G{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>V.toggle()),_.on(Y.THEME_CHANGE,()=>this.#J())}render(){this.innerHTML=`
            <button class="au-theme-toggle__button" aria-label="Toggle theme">
                <span class="au-theme-toggle__icon"></span>
            </button>
        `,this.#J()}#J(){let J=V.get()==="dark",Q=this.querySelector(".au-theme-toggle__icon");if(Q)Q.textContent=J?"☀️":"\uD83C\uDF19"}}U("au-theme-toggle",I);L("au-theme-toggle",{signals:[Y.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});class f extends G{static baseClass="au-toast";static cssFile=null;static observedAttributes=["severity","duration","position"];#J=null;#Q=null;connectedCallback(){if(!this.#Q&&!this.querySelector(".au-toast__content"))this.#Q=this.innerHTML;super.connectedCallback(),this.listen(this,"click",(Q)=>{if(Q.target.classList.contains("au-toast__close"))this.dismiss()});let J=parseInt(this.attr("duration","3000"));if(J>0)this.#J=this.setTimeout(()=>this.dismiss(),J)}disconnectedCallback(){super.disconnectedCallback()}render(){if(this.querySelector(".au-toast__content")){this.#Z();return}let J=this.#Q||"";this.innerHTML=`
            <span class="au-toast__content">${J}</span>
            <button class="au-toast__close" aria-label="Dismiss">✕</button>
        `,this.#Z()}update(J,Q,Z){this.#Z()}#Z(){let J=this.attr("severity","info"),Q=this.attr("position","bottom-center"),Z=["au-toast",`au-toast--${J}`,`au-toast--${Q}`];Z.forEach(($)=>this.classList.add($)),Array.from(this.classList).forEach(($)=>{if($.startsWith("au-toast--")&&!Z.includes($))this.classList.remove($)})}dismiss(){this.emit("au-dismiss"),this.classList.add("is-exiting");let J=!1,Q=()=>{if(!J)J=!0,this.remove()};this.addEventListener("animationend",Q,{once:!0}),this.setTimeout(Q,200)}}U("au-toast",f);class y extends G{static baseClass="au-toast-container";connectedCallback(){super.connectedCallback(),this.setAttribute("role","status"),this.setAttribute("aria-live","polite")}}U("au-toast-container",y);var R={show(J,Q={}){let Z=Q.position||"bottom-center",$=document.querySelector(`au-toast-container[position="${Z}"]`);if(!$)$=document.createElement("au-toast-container"),$.setAttribute("position",Z),document.body.appendChild($);let W=document.createElement("au-toast");if(W.textContent=J,Q.severity)W.setAttribute("severity",Q.severity);if(Q.duration)W.setAttribute("duration",Q.duration.toString());return $.appendChild(W),W}};if(typeof window<"u"&&_&&!_.hasListeners(Y.TOAST_SHOW))_.on(Y.TOAST_SHOW,(J)=>{R.show(J.message,J)});L("au-toast",{signals:[Y.TOAST_SHOW,Y.TOAST_DISMISS],options:{severities:["info","success","warning","error"],positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],defaultDuration:3000},description:"MD3 Snackbar/Toast Notification component"});if(!_.hasListeners(Y.TOAST_SHOW))_.on(Y.TOAST_SHOW,(J)=>{R.show(J.message,J)});export{S as yieldToMain,c as transitionNamed,H as transition,t as throttle,P as supportsViewTransitions,x as supportsScheduler,d as showToast,s as scheduler,w as scheduleTask,l as runImmediate,o as runBackground,i as processWithYield,QJ as processInChunks,r as navigateWithTransition,n as memo,JJ as domBatch,U as define,a as debounce,e as createVisibilityObserver,A as createStore,T as createRipple,_ as bus,C as attachRipple,m as appStore,Y as UIEvents,V as Theme,p as RippleMixin,I as AuThemeToggle,G as AuElement};
