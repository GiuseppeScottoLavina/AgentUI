import{a as p,b as c,c as i}from"./chunk-3t7554c8.js";import{f as N,g as O,h as T,i as V,j as n,k as o,l as r,m as s,n as l,o as a,q as g,s as k}from"./chunk-a277px30.js";import{A as Xz,u as t,v as e,w as zz,x as Hz,y as Jz,z as Wz}from"./chunk-zcyk4gag.js";import{B as R,C as I,F as A}from"./chunk-42j97298.js";function w(z,H={}){let J=H.persist?`agentui:${H.persist}`:null,W={...z},X=new Map,Y=new Set,G=!1,D=new Map;if(J)try{let Z=typeof localStorage<"u"?localStorage.getItem(J):null;if(Z){let $=JSON.parse(Z);if($&&typeof $==="object"){for(let F of Object.keys(z))if(F in $){let Q=z[F],B=$[F];if(Q===null||Q===void 0)W[F]=B;else if(Array.isArray(Q)){if(Array.isArray(B))W[F]=B}else if(typeof B===typeof Q)W[F]=B}}}}catch(Z){}function q(Z,$,F){let Q=X.get(Z);if(Q)for(let B of Q)B($,F);for(let B of Y)B(Z,$,F)}function L(){if(!J)return;try{if(typeof localStorage<"u")localStorage.setItem(J,JSON.stringify(W))}catch(Z){}}let x=new Set(["__proto__","constructor","prototype"]),U=new Proxy(W,{get(Z,$){return Z[$]},set(Z,$,F){if(x.has($))return console.warn(`[AgentUI Store] Blocked dangerous key: "${String($)}"`),!0;let Q=Z[$];if(Object.is(Q,F))return!0;if(Z[$]=F,G){if(!D.has($))D.set($,{oldVal:Q});D.get($).newVal=F}else q($,F,Q),L();return!0}});return{state:U,subscribe(Z,$){if(Z==="*")return Y.add($),()=>Y.delete($);if(!X.has(Z))X.set(Z,new Set);return X.get(Z).add($),()=>{let F=X.get(Z);if(F){if(F.delete($),F.size===0)X.delete(Z)}}},batch(Z){G=!0,D.clear();try{Z()}finally{G=!1;for(let[$,{newVal:F,oldVal:Q}]of D)if(!Object.is(F,Q))q($,F,Q);D.clear(),L()}},getState(){return{...W}},setState(Z){for(let[$,F]of Object.entries(Z))U[$]=F},destroy(){X.clear(),Y.clear()}}}var K=w({current:"light",preference:"auto"},{persist:"au-theme"}),P={set(z){if(z==="auto"){let H=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",H?"dark":"light")}else document.documentElement.setAttribute("data-theme",z);K.state.preference=z,K.state.current=document.documentElement.getAttribute("data-theme"),N.emit(O.THEME_CHANGE,{theme:z})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let z=this.get();this.set(z==="dark"?"light":"dark")},init(){let z=typeof localStorage<"u"?localStorage.getItem("au-theme"):null;if(z&&K.state.preference==="auto"){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}return}let H=K.state.preference;if(H&&H!=="auto")this.set(H);else if(z){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}}else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(J)=>{if(K.state.preference==="auto")document.documentElement.setAttribute("data-theme",J.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null},get _store(){return K}};if(typeof window<"u")P.init();var j="startViewTransition"in document;async function M(z){if(j)await document.startViewTransition(async()=>{await z()}).finished;else await z()}async function u(z,{name:H="page"}={}){if(j){let J=document.createElement("style");J.textContent=`::view-transition-old(${H}), ::view-transition-new(${H}) { animation-duration: 0.3s; }`,document.head.appendChild(J);try{await M(z)}finally{try{J.remove()}catch(W){}}}else await z()}async function d(z,H){await M(()=>{window.history.pushState({},"",z),H()})}class E extends R{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>P.toggle()),N.on(O.THEME_CHANGE,()=>this.#z())}render(){this.innerHTML=A`<button class="au-theme-toggle__button" aria-label="Toggle theme"> <span class="au-theme-toggle__icon"></span> </button>`,this.#z()}#z(){let z=P.get()==="dark",H=this.querySelector(".au-theme-toggle__icon");if(H)H.textContent=z?"☀️":"\uD83C\uDF19"}}I("au-theme-toggle",E);V("au-theme-toggle",{signals:[O.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});function v(z){let H=z.getAttribute("aria-labelledby");if(H){let q=H.split(" ").map((L)=>document.getElementById(L)?.textContent).filter(Boolean).join(" ");if(q)return q}let J=z.getAttribute("aria-label");if(J)return J;if(z.id){let q=document.querySelector(`label[for="${z.id}"]`);if(q)return q.textContent.trim()}let W=z.getAttribute("title");if(W)return W;let X=z.getAttribute("role")||z.tagName.toLowerCase();if(["button","link","tab","menuitem","option","radio","checkbox"].some((q)=>X.includes(q))){let q=z.textContent?.trim();if(q&&q.length<100)return q}let G=z.getAttribute("placeholder");if(G)return G;let D=z.getAttribute("value");if(D&&z.tagName.includes("INPUT"))return`Input: ${D}`;return z.tagName.toLowerCase().replace("au-","")}function m(z){let H=[],J=z.tagName.toLowerCase();if(z.hasAttribute("disabled"))return["none (disabled)"];if(z.onclick||z.hasAttribute("onclick"))H.push("click");switch(J){case"au-button":H.push("click");break;case"au-checkbox":case"au-switch":H.push("toggle","check","uncheck");break;case"au-input":case"au-textarea":H.push("type","clear","focus");break;case"au-dropdown":H.push("open","select","close");break;case"au-modal":H.push("open","close");break;case"au-tabs":H.push("select-tab");break;case"au-radio":H.push("select");break;case"au-chip":H.push("toggle","click");break;case"au-confirm":H.push("confirm","cancel");break;default:if(z.classList.contains("au-button")||z.getAttribute("role")==="button")H.push("click")}return H.length?H:["focus"]}function f(z){let H={},J=z.tagName.toLowerCase();if(z.hasAttribute("checked"))H.checked=!0;if(z.hasAttribute("disabled"))H.disabled=!0;if(z.hasAttribute("open"))H.open=!0;if(z.hasAttribute("selected"))H.selected=!0;if(z.hasAttribute("active"))H.active=!0;if(z.hasAttribute("loading"))H.loading=!0;if(z.hasAttribute("value"))H.value=z.getAttribute("value");let W=z.getAttribute("aria-checked");if(W)H.ariaChecked=W==="true";let X=z.getAttribute("aria-expanded");if(X)H.expanded=X==="true";let Y=z.getAttribute("aria-selected");if(Y)H.selected=Y==="true";switch(J){case"au-input":case"au-textarea":let G=z.querySelector("input, textarea");if(G)H.value=G.value,H.placeholder=G.placeholder;break;case"au-progress":H.value=parseFloat(z.getAttribute("value")||"0"),H.max=parseFloat(z.getAttribute("max")||"100"),H.percentage=H.value/H.max*100;break;case"au-dropdown":H.value=z.getAttribute("value"),H.open=z.classList.contains("is-open");break}return H}function _(z){let H=z.tagName.toLowerCase().replace("au-",""),J=v(z),W=f(z),X=W.disabled?" (disabled)":"",G={button:()=>`Button "${J}"${X}. ${W.loading?"Currently loading.":"Click to activate."}`,checkbox:()=>`Checkbox "${J}"${X}. Currently ${W.ariaChecked||W.checked?"checked":"unchecked"}.`,switch:()=>`Toggle switch "${J}"${X}. Currently ${W.ariaChecked||W.checked?"on":"off"}.`,input:()=>`Text input "${J}"${X}. ${W.value?`Current value: "${W.value}"`:"Empty."} ${W.placeholder?`Placeholder: "${W.placeholder}"`:""}`,textarea:()=>`Text area "${J}"${X}. ${W.value?`Contains: "${W.value.slice(0,50)}${W.value.length>50?"...":""}"`:"Empty."}`,dropdown:()=>`Dropdown "${J}"${X}. ${W.value?`Selected: "${W.value}"`:"No selection."} ${W.open?"Menu is open.":"Menu is closed."}`,modal:()=>`Modal dialog${W.open?" (currently open)":" (currently closed)"}. ${J!=="modal"?`Title: "${J}"`:""}`,tabs:()=>`Tab navigation with ${z.querySelectorAll("au-tab").length} tabs.`,tab:()=>`Tab "${J}". ${W.active?"Currently active.":"Inactive."}`,progress:()=>`Progress bar at ${Math.round(W.percentage||0)}%.`,spinner:()=>"Loading spinner indicating operation in progress.",alert:()=>`Alert message: "${z.textContent?.trim().slice(0,100)||J}"`,card:()=>`Card container${J!=="card"?` titled "${J}"`:""}.`,chip:()=>`Chip "${J}"${X}. ${W.selected?"Selected.":"Not selected."}`,badge:()=>`Badge showing "${z.textContent?.trim()||"notification"}"`,avatar:()=>`User avatar${z.getAttribute("name")?` for "${z.getAttribute("name")}"`:""}`,icon:()=>`Icon: ${z.getAttribute("name")||"decorative"}`,confirm:()=>`Confirmation dialog. ${W.open?"Waiting for user response.":"Hidden."}`,fetch:()=>`Data fetcher${W.loading?" (loading)":""}. URL: ${z.getAttribute("url")||"not set"}`}[H];if(G)return G();return`${H} component${J?` "${J}"`:""}${X}.`}function b(z){let H=z.getBoundingClientRect();return H.top<window.innerHeight&&H.bottom>0&&H.left<window.innerWidth&&H.right>0&&H.width>0&&H.height>0}function S(z=document.body,H={}){let{visibleOnly:J=!1,interactiveOnly:W=!1,types:X=null}=H,Y;if(X)Y=z.querySelectorAll(X.join(","));else Y=Array.from(z.querySelectorAll("*")).filter((q)=>q.tagName.toLowerCase().startsWith("au-")&&q.tagName.toLowerCase()!=="au-ripple-wave");let G=[],D=new Set(["au-button","au-checkbox","au-switch","au-input","au-textarea","au-dropdown","au-radio","au-tab","au-chip","au-modal","au-confirm"]);for(let q of Y){let L=q.tagName.toLowerCase(),x=D.has(L),U=b(q);if(J&&!U)continue;if(W&&!x)continue;let Z=q.getBoundingClientRect();G.push({tag:L,id:q.id||null,label:v(q),description:_(q),state:f(q),actions:m(q),rect:{top:Math.round(Z.top),left:Math.round(Z.left),width:Math.round(Z.width),height:Math.round(Z.height)},interactive:x,visible:U})}return G}function C(z){let H=typeof z==="string"?document.querySelector(z):z;if(!H)return null;return _(H)}function h(){let z=new Map,H=["au-button","au-input","au-textarea","au-checkbox","au-switch","au-dropdown","au-option","au-radio","au-radio-group","au-chip","au-card","au-tabs","au-tab","au-alert","au-badge","au-progress","au-avatar","au-skeleton","au-spinner","au-modal","au-toast","au-tooltip","au-icon","au-stack","au-grid","au-container","au-navbar","au-sidebar","au-divider","au-theme-toggle","au-virtual-list","au-lazy","au-repeat","au-form","au-table","au-confirm","au-fetch"];for(let J of H){let W=customElements.get(J);if(W)z.set(J,W)}return z}function y(z,H=document.body){let J=z.toLowerCase();return S(H).filter((X)=>X.label.toLowerCase().includes(J)).map((X)=>{let Y=X.id?`#${X.id}`:`${X.tag}`;return H.querySelector(Y)}).filter(Boolean)}if(!N.hasListeners(O.TOAST_SHOW))N.on(O.TOAST_SHOW,(z)=>{g.show(z.message,z)});if(typeof window<"u"&&!window.AgentUI){window.AgentUI={Theme:P,bus:N,UIEvents:O,showToast:T,getAuComponentTree:S,describeComponent:C,findByLabel:y,getRegisteredComponents:h,auConfirm:k,ready:!1,async discoverAll(){if(!R._describeCatalog)await this.loadDescriptions();let H={},J=["au-button","au-input","au-textarea","au-card","au-modal","au-alert","au-toast","au-checkbox","au-switch","au-radio","au-dropdown","au-tabs","au-tab","au-chip","au-badge","au-avatar","au-progress","au-spinner","au-skeleton","au-tooltip","au-table","au-datatable","au-form","au-stack","au-grid","au-container","au-divider","au-drawer","au-sidebar","au-navbar","au-bottom-nav","au-layout","au-router","au-page","au-theme-toggle","au-splash","au-virtual-list","au-lazy","au-repeat","au-fetch","au-confirm","au-schema-form","au-prompt-ui","au-error-boundary","au-code","au-callout","au-icon","au-api-table","au-example","au-doc-page"];for(let W of J){let X=customElements.get(W);if(X?.describe)H[W]=X.describe()}return H},async loadDescriptions(){if(R._describeCatalog)return;let H=document.querySelectorAll("script[src]"),J="";for(let X of H)if(X.src.includes("agentui")||X.src.includes("chunks")){if(J=X.src.substring(0,X.src.lastIndexOf("/")+1),J.includes("/chunks/"))J=J.replace("/chunks/","/");break}let W=J+"describe-catalog.json";try{let X=await fetch(W);if(X.ok)R._describeCatalog=await X.json()}catch(X){if(window.AGENTUI_DEBUG)console.warn("[AgentUI] Could not load describe catalog from",W)}}};let z=()=>{if(window.AGENTUI_DEBUG)console.log("[AgentUI] All components registered, emitting au-ready");window.AgentUI.ready=!0,document.dispatchEvent(new CustomEvent("au-ready",{detail:{timestamp:Date.now()}}))};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",z,{once:!0});else setTimeout(z,0)}export{r as yieldToMain,u as transitionNamed,M as transition,Hz as throttle,j as supportsViewTransitions,n as supportsScheduler,T as showToast,t as scheduler,o as scheduleTask,a as runImmediate,l as runBackground,s as processWithYield,Xz as processInChunks,d as navigateWithTransition,e as memo,Wz as domBatch,I as define,zz as debounce,Jz as createVisibilityObserver,p as createRipple,N as bus,c as attachRipple,O as UIEvents,P as Theme,i as RippleMixin,E as AuThemeToggle,R as AuElement};
