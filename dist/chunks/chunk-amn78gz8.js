import{A as x,B as D}from"./chunk-vnx9x0yp.js";var F=typeof window<"u"?window:globalThis,L=["ui:toast","ui:modal","ui:theme","ui:tabs","ui:dropdown","ui:form","ui:grid","ui:stack","ui:virtual-list"],U={type:"ui-framework",version:"0.1.116",description:"AI-Optimized UI Framework - Web Components Edition"};class Y{#q=new Map;#J=new Map;#Q=new Set;#V=new Set;#X=100;#Z=!1;#$=Date.now();peerId;capabilities;meta;constructor(q={}){this.peerId=q.peerId??"default",this.capabilities=q.capabilities??[],this.meta=q.meta??{},this.#Z=q.debug??!1}on(q,J){if(!this.#q.has(q))this.#q.set(q,new Set);let V=J;this.#q.get(q).add(V);let Q=this.#q.get(q).size;if(Q>this.#X)console.warn(`[AgentUI] Possible event leak: "${q}" has ${Q} listeners (maxListeners: ${this.#X}). Use setMaxListeners() to increase.`);return{unsubscribe:()=>this.#q.get(q)?.delete(V)}}off(q,J){this.#q.get(q)?.delete(J)}emitSync(q,J){let V={event:q,data:J};for(let Z of this.#V)V=Z(V,{event:q})??V;let Q=this.#q.get(q);if(Q)for(let Z of Q){let $=V;for(let z of this.#Q)$=z($,{event:q})??$;Z($)}for(let[Z,$]of this.#q)if(Z.endsWith("*")&&q.startsWith(Z.slice(0,-1))&&Z!==q)for(let z of $)z(V)}async emit(q,J){return this.emitSync(q,J),{delivered:!0,event:q}}signal(q,J){this.emitSync(q,J)}hasListeners(q){return(this.#q.get(q)?.size??0)>0}handle(q,J){return this.#J.set(q,J),{unsubscribe:()=>this.#J.delete(q)}}unhandle(q){this.#J.delete(q)}async request(q,J,V){let Q=this.#J.get(J);if(!Q)throw Error(`No handler for '${J}'`);return Q(V)}async broadcastRequest(q,J){return this.request(this.peerId,q,J)}addInboundHook(q){return this.#Q.add(q),()=>this.#Q.delete(q)}addOutboundHook(q){return this.#V.add(q),()=>this.#V.delete(q)}setMaxListeners(q){this.#X=q}get debug(){return this.#Z}get peers(){return[]}get peerCount(){return 0}healthCheck(){return{status:"healthy",peerId:this.peerId,uptime:Date.now()-this.#$,listeners:this.#q.size,handlers:this.#J.size}}destroy(){this.#q.clear(),this.#J.clear(),this.#Q.clear(),this.#V.clear()}}if(!F.__AGENTUI_BUS__)F.__AGENTUI_BUS__=new Y({peerId:"agentui",capabilities:L,meta:U});var X=F.__AGENTUI_BUS__,K="__AGENTUI_COMPONENT_REGISTRY__";if(!F[K])F[K]=new Map;var _=F[K],j={on(q,J){let V=X.on(q,(Q)=>{J(Q.data??Q)});return()=>V.unsubscribe()},once(q,J){let V=this.on(q,(Q)=>{V(),J(Q)})},off(q,J){X.off(q,J)},emit(q,J){return X.emitSync(q,J)},async emitAsync(q,J){return X.emit(q,J)},signal(q,J){X.signal(q,J)},async request(q,J,V){return X.request(q,J,V)},async broadcastRequest(q,J){return X.broadcastRequest(q,J)},handle(q,J){return X.handle(q,J)},unhandle(q){X.unhandle(q)},destroy(){X.destroy()},setMaxListeners(q){X.setMaxListeners(q)},get peerId(){return X.peerId},get peers(){return X.peers},get peerCount(){return X.peerCount},hasListeners(q){return X.hasListeners(q)},get raw(){return X}},W={TOAST_SHOW:"ui:toast:show",TOAST_DISMISS:"ui:toast:dismiss",MODAL_OPEN:"ui:modal:open",MODAL_CLOSE:"ui:modal:close",THEME_CHANGE:"ui:theme:change",TAB_CHANGE:"ui:tab:change",DROPDOWN_SELECT:"ui:dropdown:select",FORM_SUBMIT:"ui:form:submit",FORM_VALIDATE:"ui:form:validate"},N=(q,J={})=>{j.emit(W.TOAST_SHOW,{message:q,...J})};var G=(q,J)=>{_.set(q,{...J,registeredAt:Date.now()})};var w="scheduler"in globalThis;async function H(q,J="user-visible"){if(w)return globalThis.scheduler.postTask(q,{priority:J});let V=J==="user-blocking"?0:J==="user-visible"?0:1;return new Promise((Q)=>{setTimeout(()=>Q(q()),V)})}async function P(){if(w&&"yield"in globalThis.scheduler)return globalThis.scheduler.yield();return new Promise((q)=>setTimeout(q,0))}async function A(q,J,V=50){for(let Q=0;Q<q.length;Q++)if(J(q[Q],Q),(Q+1)%V===0)await P()}function C(q){return H(q,"background")}function I(q){return H(q,"user-blocking")}function T(){return new Promise((q)=>{requestAnimationFrame(()=>requestAnimationFrame(q))})}class M extends x{static baseClass="au-toast";static cssFile=null;static observedAttributes=["severity","duration","position"];#q=null;#J=null;connectedCallback(){if(!this.#J&&!this.querySelector(".au-toast__content"))this.#J=this.innerHTML;super.connectedCallback(),this.listen(this,"click",(J)=>{if(J.target.classList.contains("au-toast__close"))this.dismiss()});let q=parseInt(this.attr("duration","3000"));if(q>0)this.#q=this.setTimeout(()=>this.dismiss(),q)}disconnectedCallback(){super.disconnectedCallback()}render(){if(this.querySelector(".au-toast__content")){this.#Q();return}let q=this.#J||"";this.innerHTML=`
            <span class="au-toast__content">${q}</span>
            <button class="au-toast__close" aria-label="Dismiss">âœ•</button>
        `,this.#Q()}update(q,J,V){this.#Q()}#Q(){let q=this.attr("severity","info"),J=this.attr("position","bottom-center"),V=["au-toast",`au-toast--${q}`,`au-toast--${J}`];V.forEach((Q)=>this.classList.add(Q)),Array.from(this.classList).forEach((Q)=>{if(Q.startsWith("au-toast--")&&!V.includes(Q))this.classList.remove(Q)})}dismiss(){this.emit("au-dismiss"),this.classList.add("is-exiting");let q=!1,J=()=>{if(!q)q=!0,this.remove()};this.addEventListener("animationend",J,{once:!0}),this.setTimeout(J,200)}}D("au-toast",M);class O extends x{static baseClass="au-toast-container";connectedCallback(){super.connectedCallback(),this.setAttribute("role","status"),this.setAttribute("aria-live","polite")}}D("au-toast-container",O);var R={show(q,J={}){let V=J.position||"bottom-center",Q=document.querySelector(`au-toast-container[position="${V}"]`);if(!Q)Q=document.createElement("au-toast-container"),Q.setAttribute("position",V),document.body.appendChild(Q);let Z=document.createElement("au-toast");if(Z.textContent=q,J.severity)Z.setAttribute("severity",J.severity);if(J.duration)Z.setAttribute("duration",J.duration.toString());return Q.appendChild(Z),Z}};if(typeof window<"u"&&j&&!j.hasListeners(W.TOAST_SHOW))j.on(W.TOAST_SHOW,(q)=>{R.show(q.message,q)});G("au-toast",{signals:[W.TOAST_SHOW,W.TOAST_DISMISS],options:{severities:["info","success","warning","error"],positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],defaultDuration:3000},description:"MD3 Snackbar/Toast Notification component"});
export{j as f,W as g,N as h,G as i,w as j,H as k,P as l,A as m,C as n,I as o,T as p,M as q,R as r};
