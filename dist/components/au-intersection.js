import{t as x,u as z}from"./chunk-xm6c90d2.js";class B extends x{static baseClass="au-intersection";static observedAttributes=["threshold","root-margin","once"];static cssFile=null;static useContainment=!1;#k=null;#q=!1;render(){this.style.display="contents",setTimeout(()=>{if(this.isConnected)this.#w()},0)}get isVisible(){return this.#q}#w(){let k=parseFloat(this.getAttribute("threshold")||"0");if(isNaN(k))k=0;k=Math.max(0,Math.min(1,k));let w=this.getAttribute("root-margin")||"0px",q=this.hasAttribute("once");this.#k=new IntersectionObserver((F)=>this.#x(F,q),{threshold:k,rootMargin:w});let D=this.firstElementChild||this;this.#k.observe(D)}#x(k,w){let q=k[k.length-1];if(q.isIntersecting){if(this.#q=!0,this.emit("au-visible",{ratio:q.intersectionRatio}),w)this.#k?.disconnect()}else this.#q=!1,this.emit("au-hidden",{ratio:q.intersectionRatio})}disconnectedCallback(){if(this.#k)this.#k.disconnect(),this.#k=null;super.disconnectedCallback()}}z("au-intersection",B);export{B as AuIntersection};
